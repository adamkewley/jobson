

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; jobson-docs 1.0.13 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command-Line Interface" href="commandline.html" />
    <link rel="prev" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> jobson-docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="how-it-works.html">How It Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-jobson-s-command-line-interface">Test Jobson’s Command-Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-a-workspace">Generate a Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-a-job-spec">Generate a Job Spec</a></li>
<li class="toctree-l2"><a class="reference internal" href="#edit-the-job-spec-to-match-the-application">Edit the Job Spec to match the Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-validate-and-run-a-job-against-the-job-spec"><em>Optional</em>: Validate and Run a Job Against the Job Spec</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-the-server">Boot the Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#verify-the-server-s-working">Verify the Server’s Working</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-configuration.html">Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="workspaces.html">Workspaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="specs.html">Job Specs</a></li>
<li class="toctree-l1"><a class="reference external" href="apidocs/index.html#://">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="ui.html">User Interface (Jobson UI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="http-proxying-to-jobson.html">HTTP Proxying to Jobson</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Developer’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">jobson-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>Jobson’s initial setup is inspired by <a class="reference external" href="//rubyonrails.org">Ruby on
Rails</a>, where the command-line is used to generate
and launch convention-over-configuration projects (in Jobson,
<a class="reference external" href="workspaces.html">workspaces</a>).</p>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>View the <a class="reference external" href="install.html">install</a> page.</p>
</section>
<section id="test-jobson-s-command-line-interface">
<h2>Test Jobson’s Command-Line Interface<a class="headerlink" href="#test-jobson-s-command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>This guide uses Jobson’s command-line, which should be available if
you have installed Jobson correctly. Ensure you can run it, for
example, by showing its help pages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson --help
</pre></div>
</div>
<p>More details about the command-line interface can be found
<a class="reference external" href="commandline.html">here</a>.</p>
</section>
<section id="generate-a-workspace">
<h2>Generate a Workspace<a class="headerlink" href="#generate-a-workspace" title="Permalink to this headline">¶</a></h2>
<p>Workspaces are Jobson’s way of organizing its configuration and
data. The <code class="docutils literal notranslate"><span class="pre">new</span></code> command generates a barebones workspace containing
the minimum necessary files to run a Jobson server:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson new --demo
create    config.yml
create    users
create    specs
create    specs/demo
create    specs/demo/spec.yml
create    specs/demo/demo-script.sh
create    specs/demo/demo-dependency
create    <span class="nb">jobs</span>
create    wds
</pre></div>
</div>
<p>More details about workspaces can be found <a class="reference external" href="workspaces.html">here</a>.</p>
</section>
<section id="generate-a-job-spec">
<h2>Generate a Job Spec<a class="headerlink" href="#generate-a-job-spec" title="Permalink to this headline">¶</a></h2>
<p>Job specs are standard YAML files that describe an application. They
are held in the <code class="docutils literal notranslate"><span class="pre">specs/</span></code> folder in a workspace. The <code class="docutils literal notranslate"><span class="pre">generate</span>
<span class="pre">spec</span></code> command generates a new job spec:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson generate spec foo
create    specs/foo
create    specs/foo/spec.yml
</pre></div>
</div>
<p>More details about job specs can be found <a class="reference external" href="specs.html">here</a>.</p>
</section>
<section id="edit-the-job-spec-to-match-the-application">
<h2>Edit the Job Spec to match the Application<a class="headerlink" href="#edit-the-job-spec-to-match-the-application" title="Permalink to this headline">¶</a></h2>
<p>For the sake of this guide, lets assume you want Jobson to host a python
script takes two inputs, prints something to the standard output (via
<code class="docutils literal notranslate"><span class="pre">print</span></code>), and writes an output file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># specs/foo/foo.py</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="n">first_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">second_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="n">first_name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">second_name</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;output.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Some output data</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to turn this script into a web API, Jobson needs a job spec
that describes the script. Lets edit <code class="docutils literal notranslate"><span class="pre">specs/foo/spec.yml</span></code> to do that:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># specs/foo/spec.yml</span>

<span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A python script in the Jobson documentation</span>
<span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">&gt;</span>

  <span class="no">A job that prints the provided first and second name, followed by</span>
  <span class="no">writing some text to an output file.</span>

<span class="nt">expectedInputs</span><span class="p">:</span>

<span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">firstName</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">First Name</span>

<span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secondName</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Second Name</span>

<span class="nt">execution</span><span class="p">:</span>
  <span class="nt">application</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
  <span class="nt">arguments</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">foo.py</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">${inputs.firstName}</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">${inputs.secondName}</span>
  <span class="nt">dependencies</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foo.py</span>
    <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foo.py</span>

<span class="nt">expectedOutputs</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputFile</span>
  <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">output.txt</span>
</pre></div>
</div>
<p>This example is describing a job that:</p>
<ul class="simple">
<li><p>Takes two <code class="docutils literal notranslate"><span class="pre">string</span></code> inputs (<code class="docutils literal notranslate"><span class="pre">firstName</span></code> and <code class="docutils literal notranslate"><span class="pre">secondName</span></code>)</p></li>
<li><p>Copies <code class="docutils literal notranslate"><span class="pre">foo.py</span></code> in the job spec’s folder to <code class="docutils literal notranslate"><span class="pre">foo.py</span></code> in the
runtime working directory</p></li>
<li><p>Executes <code class="docutils literal notranslate"><span class="pre">python</span></code> with arguments <code class="docutils literal notranslate"><span class="pre">{inputs.firstName}</span></code>,
<code class="docutils literal notranslate"><span class="pre">${inputs.secondName}</span></code>. These arguments are examples of template
expressions. In this case, those expressions resolve to the
<code class="docutils literal notranslate"><span class="pre">firstName</span></code> and <code class="docutils literal notranslate"><span class="pre">secondName</span></code> inputs provided by clients</p></li>
<li><p>Checks that the <code class="docutils literal notranslate"><span class="pre">python</span></code> script exits with an exit code of <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>Once the application has exited, checks for a file called
<code class="docutils literal notranslate"><span class="pre">output.txt</span></code> in the application’s working directory and persists
that file under the ID <code class="docutils literal notranslate"><span class="pre">outputFile</span></code></p></li>
</ul>
<p>More details about <a class="reference external" href="specs.html">job specs</a> and <a class="reference external" href="specs.html#template-strings">template
expressions</a> are available at the links.</p>
</section>
<section id="optional-validate-and-run-a-job-against-the-job-spec">
<h2><em>Optional</em>: Validate and Run a Job Against the Job Spec<a class="headerlink" href="#optional-validate-and-run-a-job-against-the-job-spec" title="Permalink to this headline">¶</a></h2>
<p>The job spec can be validated by Jobson to check for basic syntactical
errors. The <code class="docutils literal notranslate"><span class="pre">validate</span> <span class="pre">spec</span></code> command will exit with no output if your
job spec is syntactically valid. Run it from your main jobson deployment
folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson validate spec foo
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">validate</span></code> command exits silently on success.</p>
<p>For a more in-depth validation step, it’s a good idea to run an actual
job request against the job spec to see if any runtime bugs pop up.
Jobson accepts accepts job requests in a JSON format. The
<code class="docutils literal notranslate"><span class="pre">generate</span> <span class="pre">request</span></code> command generates a random standard JSON request
against a spec:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson generate request foo
<span class="o">{</span>
  <span class="s2">&quot;spec&quot;</span> : <span class="s2">&quot;foo&quot;</span>,
  <span class="s2">&quot;name&quot;</span> : <span class="s2">&quot;Adipisci voluptatum vel dolore omnis delectus.&quot;</span>,
  <span class="s2">&quot;inputs&quot;</span> : <span class="o">{</span>
    <span class="s2">&quot;firstName&quot;</span> : <span class="s2">&quot;Et sint qui nam tempore.&quot;</span>,
    <span class="s2">&quot;secondName&quot;</span> : <span class="s2">&quot;Maxime dolores aut est.&quot;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Jobson has generated placeholder text (e.g.
<code class="docutils literal notranslate"><span class="pre">Et</span> <span class="pre">sint</span> <span class="pre">qui</span> <span class="pre">nam</span> <span class="pre">tempore.</span></code>) for the inputs. The generated JSON matches
the structure of requests as sent via the Jobson HTTP API (specifically,
<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/v1/jobs</span></code>).</p>
<p>Although the job spec is syntactically correct, it may still fail at
runtime, so it’s good practice to run a request against the spec.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> command runs a job request locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson generate request foo &gt; request.json
$ jobson run request.json
Et sint qui nam tempore. Maxime dolores aut est.
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">generate</span> <span class="pre">request</span></code> command generated lorem-ipsum text for
<code class="docutils literal notranslate"><span class="pre">firstName</span></code> and <code class="docutils literal notranslate"><span class="pre">lastName</span></code>, which was forwarded into our python
script (<code class="docutils literal notranslate"><span class="pre">foo.py</span></code>) and printed out.</p>
<p>Although it isn’t obvious, the <code class="docutils literal notranslate"><span class="pre">run</span></code> command ran <code class="docutils literal notranslate"><span class="pre">request.json</span></code>
through the entire Jobson stack in order to verify that nothing breaks.
As a convenience feature, it redirected the the standard output,
standard error, and exit code from the application back to the
command-line, which lets you debug runtime errors more easily.</p>
<p>We’ve now created a job spec, validated it, and ran it locally, all
that’s left is to host it.</p>
</section>
<section id="boot-the-server">
<h2>Boot the Server<a class="headerlink" href="#boot-the-server" title="Permalink to this headline">¶</a></h2>
<p>With a working job spec in place, we’re ready to boot a server. The
<code class="docutils literal notranslate"><span class="pre">serve</span></code> command should be ran from the workspace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ jobson serve config.yml
</pre></div>
</div>
<p>More details about the server configuration (<code class="docutils literal notranslate"><span class="pre">config.yml</span></code>) are
available <a class="reference external" href="server-configuration.html">here</a>.</p>
</section>
<section id="verify-the-server-s-working">
<h2>Verify the Server’s Working<a class="headerlink" href="#verify-the-server-s-working" title="Permalink to this headline">¶</a></h2>
<p>The server is then running, which you can verify with a HTTP tool such
as <code class="docutils literal notranslate"><span class="pre">curl</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ curl localhost:8080/v1/
<span class="o">{</span><span class="s2">&quot;_links&quot;</span>:<span class="o">{</span><span class="s2">&quot;specs&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/specs&quot;</span><span class="o">}</span>,<span class="s2">&quot;current-user&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/users/current&quot;</span><span class="o">}</span>,<span class="s2">&quot;jobs&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/jobs&quot;</span><span class="o">}}}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">request.json</span></code> generated for the <code class="docutils literal notranslate"><span class="pre">run</span></code> command is an entirely
valid API request. Therefore, you can also <code class="docutils literal notranslate"><span class="pre">POST</span></code> it via the HTTP API:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ curl --data @request.json -H <span class="s1">&#39;Content-Type: application/json&#39;</span> localhost:8080/v1/jobs
<span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;svpj5ppevn&quot;</span>,<span class="s2">&quot;_links&quot;</span>:<span class="o">{</span><span class="s2">&quot;outputs&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/jobs/svpj5ppevn/outputs&quot;</span><span class="o">}</span>,<span class="s2">&quot;inputs&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/jobs/svpj5ppevn/inputs&quot;</span><span class="o">}</span>,<span class="s2">&quot;self&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/jobs/svpj5ppevn&quot;</span><span class="o">}</span>,<span class="s2">&quot;spec&quot;</span>:<span class="o">{</span><span class="s2">&quot;href&quot;</span>:<span class="s2">&quot;/v1/jobs/svpj5ppevn/spec&quot;</span><span class="o">}}}</span>
</pre></div>
</div>
</section>
<section id="what-s-next">
<h2>What’s Next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
<p>Now that a server is running, downstream clients can use the API to post
job requests to the server, which will validate the request is valid
(e.g. “it has a <code class="docutils literal notranslate"><span class="pre">firstName</span></code> string field”), run the application, and
collect outputs - all while handling authentication, IDing, persistence,
queueing, concurrency, etc.</p>
<p>Now that you’ve seen the general idea behind Jobson, there’s several
steps you can take:</p>
<ul class="simple">
<li><p><strong>Add a user interface</strong>: <code class="docutils literal notranslate"><span class="pre">jobson</span></code> only hosts a JSON API, you will need to install a <a class="reference external" href="ui.html">User Interface</a> to view the jobs.</p></li>
<li><p><strong>Customize the server</strong>: See <a class="reference external" href="server-configuration.html">Server
Configuration</a></p></li>
<li><p><strong>Learn about Job Specs</strong>: See <a class="reference external" href="specs.html">Job Specs</a></p></li>
</ul>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="commandline.html" class="btn btn-neutral float-right" title="Command-Line Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Adam Kewley

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>